<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/img/logo.png"/>
    <title>Bazoka - Nền tảng du lịch hàng đầu thế giới</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/all.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/userInfo.css">
</head>

<body>
    <header class="sticky-top">
        <nav id="navbar" class="navbar navbar-expand-lg">
            <div class="container">
              <a class="navbar-brand me-auto" href="index.html"><img src="/img/logo.png" alt="" width="80" height="70">Bazoka</a>         
              <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                  <h5 class="offcanvas-title" id="offcanvasNavbarLabel"><img src="/img/logo.png" alt="" width="80" height="60">Bazoka</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                  <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                    <li class="nav-item">
                      <a class="nav-link mx-lg-2 active" aria-current="page" href="#">Trang chủ</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link mx-lg-2" href="Contact.html">Liên hệ dịch vụ khách hàng</a>
                    </li>
                    <li class="nav-item dropdown">
                      <a class="nav-link mx-lg-2 dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Hỗ trợ
                      </a>
                      <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Trợ giúp</a></li>
                        <li><a class="dropdown-item" href="connectParnter.html">Liên hệ chúng tôi</a></li>
                      </ul>
                    </li>
                    <li id="info-user" class="nav-item dropdown" style="display: none;">
                        <a class="nav-link mx-lg-2 dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          <img id="avarta" src="/img/germany.jpg" alt="" width="25" height="25" style="border-radius: 50px;">
                          <span id="userName"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="userInfo.html#account-general"><i class="fa-solid fa-user me-2 icon-comment"></i>Chỉnh sửa hồ sơ</a></li>
                            <li><a class="dropdown-item" href="userInfo.html#account-my-bookings"><i class="fa-solid fa-hotel me-2 icon-comment"></i>Đặt chỗ của tôi</a></li>
                            <li><a class="dropdown-item" href="discount.html"><i class="fa-solid fa-percent me-2 icon-comment"></i>Mã giảm giá</a></li>
                            <li><a id="logout-link" class="dropdown-item" href="#"><i class="fa-solid fa-right-from-bracket me-2 icon-comment"></i>Đăng xuất</a></li>
                        </ul>
                    </li>
                    <li class="nav-item mt-2">
                        <a id="loginButton" class="mx-lg-2 login-button" href="loginUser.html">Đăng nhập</a>
                        <a id="registerButton" class="mx-lg-2 login-button register-button" href="loginUser.html">Đăng ký</a>
                    </li>
                  </ul>
                </div>
              </div>
              <button class="navbar-toggler pe-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
        </nav>    
    </header>
    <div class="container light-style flex-grow-1 container-p-y">
        <h4 class="fw-bold py-3 mb-4">
            Cài đặt tài khoản
        </h4>
        <div class="card overflow-hidden">
            <div class="row g-0 row-bordered row-border-light">
                <div class="col-md-3 pt-0">
                    <div class="list-group list-group-flush account-settings-links">
                        <a class="list-group-item list-group-item-action active" data-bs-toggle="list"
                            href="#account-general">Chung</a>
                        <a class="list-group-item list-group-item-action" data-bs-toggle="list"
                            href="#account-change-password">Đổi mật khẩu</a>
                        <a class="list-group-item list-group-item-action" data-bs-toggle="list"
                            href="#account-my-bookings">Đặt phòng của tôi</a>  
                        <a class="list-group-item list-group-item-action" data-bs-toggle="list"
                            href="#account-notifications">Thông báo</a>  
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="tab-content">
                        <div class="tab-pane fade active show" id="account-general">
                            <div class="card-body d-flex align-items-center">
                                <img id="avarta1" alt=""
                                    class="d-block ui-w-80">
                                <div class="ms-4">
                                    <label class="btn btn-outline-primary">
                                        Tải ảnh mới lên
                                        <input type="file" class="account-settings-fileinput d-none" id="anh_dai_dien">
                                    </label>
                                    <div class="text-muted small mt-1">Cho phép JPG, GIF hoặc PNG.</div>
                                </div>
                            </div>
                            <hr class="border-light m-0">
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Họ tên</label>
                                    <input type="text" class="form-control" id="hoTen" placeholder="Nhập họ tên">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" placeholder="Nhập email">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">SDT</label>
                                    <input type="text" class="form-control" id="phone" placeholder="Nhập số điện thoại">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ngày sinh</label>
                                    <br>
                                    <select id="day" class="bg-white">
                                    </select>
                                    <select id="month" class="bg-white">
                                        <option value="01">Jan</option>
                                        <option value="02">Feb</option>
                                        <option value="03">Mar</option>
                                        <option value="04">Apr</option>
                                        <option value="05">May</option>
                                        <option value="06">Jun</option>
                                        <option value="07">Jul</option>
                                        <option value="08">Aug</option>
                                        <option value="09">Sep</option>
                                        <option value="10">Oct</option>
                                        <option value="11">Nov</option>
                                        <option value="12">Dec</option>
                                    </select>
                                    <select id="year" class="bg-white">
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Giới tính</label>
                                    <select id="gender" class="form-select">
                                        <option value="" disabled selected>Chọn giới tính</option>
                                        <option value="Nam">Nam</option>
                                        <option value="Nữ">Nữ</option>
                                    </select>
                                                                      
                                </div>
                                <button class="btn btn-danger" id="updateInfoButton">Lưu thông tin</button>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="account-change-password">
                            <div class="card-body pb-2">
                                <div class="mb-3">
                                    <label class="form-label">Mật khẩu hiện tại</label>
                                    <input type="password" class="form-control" id="currentPassword">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Mật khẩu mới</label>
                                    <input type="password" class="form-control" id="newPassword">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Nhập lại mật khẩu mới</label>
                                    <input type="password" class="form-control" id="checknewPassword">
                                </div>
                                <a href="#" class="btn btn-danger mt-3" id="changePassword">Lưu mật khẩu mới</a> <!-- Nút lưu mật khẩu mới -->
                            </div>
                        </div>
                        <div class="tab-pane fade" id="account-my-bookings">
                            <div class="card-body pb-2">
                                <h5 class="mb-3">Danh sách phòng đã đặt</h5>
                                <div class="alert alert-info custom-alert" role="alert">
                                    <i class="bi bi-info-circle-fill me-2"></i>
                                    Bạn có thể hủy đặt phòng trước ngày đến 3 ngày.
                                </div>
                                
                                <!-- Phòng đã đặt 1 -->
                                <div id="bookingUser"></div>
                                <div class="chat-widget" id="chatWidget">
                                    <div class="chat-header">
                                        <h6 class="mb-0">Chat với khách sạn</h6>
                                        <button type="button" class="btn-close" onclick="toggleChat()"></button>
                                    </div>
                                    <div class="chat-body" id="chatBody">
                                        <div class="chat-messages">
                                            <div class="message hotel-message">Xin chào! Chúng tôi có thể giúp gì cho bạn?</div>
                                        </div>
                                    </div>
                                    <div class="chat-footer">
                                        <input type="text" class="form-control" placeholder="Nhập tin nhắn..." id="messageInput">
                                        <button class="btn btn-primary ms-2" onclick="sendMessage()">Gửi</button>
                                    </div>
                                </div>
                            
                            </div>
                        </div>
                        
                        <div class="tab-pane fade" id="account-notifications">
                            <div class="card-body pb-2">
                                <h6 class="mb-4">Hoạt động</h6>
                                <div class="form-check form-switch">
                                    <input type="checkbox" class="form-check-input" id="email-news" checked>
                                    <label class="form-check-label" for="email-news">Email cho tôi khi có tin tức</label>
                                </div>
                                <div class="form-check form-switch">
                                    <input type="checkbox" class="form-check-input" id="email-updates" checked>
                                    <label class="form-check-label" for="email-updates">Cập nhật qua email</label>
                                </div>
                            </div>
                        </div>                              
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        function toggleChat() {
            const chatWidget = document.getElementById('chatWidget');
            chatWidget.classList.toggle('active');
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            if (message) {
                const chatBody = document.getElementById('chatBody');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message user-message';
                messageDiv.textContent = message;
                chatBody.querySelector('.chat-messages').appendChild(messageDiv);
                messageInput.value = '';
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        }

        document.getElementById('messageInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
    <script>
        window.addEventListener('scroll', function() {
            var navbar = document.getElementById('navbar');
            var scrollPosition = window.scrollY;
            if (scrollPosition > 0) {
                navbar.classList.add('dragged');
            } else {
                navbar.classList.remove('dragged');
            }
        });
    </script>
      <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.5.1/axios.min.js"
        integrity="sha512-emSwuKiMyYedRwflbZB2ghzX8Cw8fmNVgZ6yQNNXXagFzFOaQmbvQ1vmDkddHjm5AITcBIZfC7k4ShQSjgPAmQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/class.js"></script>
    <script src="/services/callApi.js"></script>
    <script src="/js/succesLogin.js"></script>
    <script src="/js/updateInfoUser.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const hash = window.location.hash;
            if (hash) {
                const tab = document.querySelector(`a[href="${hash}"]`);
                if (tab) {
                    tab.click(); // Kích hoạt tab tương ứng
                }
            }
        });
    </script>
    
    <script>
        const monthSelect = document.getElementById('month');
        const daySelect = document.getElementById('day');
        const yearSelect = document.getElementById('year');
    
        monthSelect.addEventListener('change', updateDays);
        yearSelect.addEventListener('change', updateDays);
    
        function updateDays() {
            const month = parseInt(monthSelect.value);
            const year = parseInt(yearSelect.value);
            const daysInMonth = new Date(year, month, 0).getDate();
            daySelect.innerHTML = '';
            for (let i = 1; i <= daysInMonth; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                daySelect.appendChild(option);
            }
        }
    
        function populateYears() {
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year >= 1920; year--) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }
        }
    
        function setCurrentDate() {
            const currentDate = new Date();
            const currentMonth = ('0' + (currentDate.getMonth() + 1)).slice(-2); // Month is zero-based
            const currentDay = ('0' + currentDate.getDate()).slice(-2);
            const currentYear = currentDate.getFullYear();
    
            monthSelect.value = currentMonth;
            updateDays(); // Update days based on current month
            daySelect.value = currentDay;
            yearSelect.value = currentYear;
        }
    
        // Populate years dropdown from 1968 to current year
        populateYears();
        // Set current date
        setCurrentDate();
        // Initialize days based on current month and years dropdown
        updateDays();
      </script>
</body>

</html>